<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets">
<h:head>
    <meta charset="UTF-8"/>
    <title>PERSON一覧</title>
    <h:outputStylesheet name="css/style.css"/>
</h:head>
<h:body>
    <h1>PERSON一覧</h1>

    <!-- Error and Success Messages -->
    <h:messages globalOnly="false" 
                showSummary="true" 
                showDetail="false" 
                styleClass="error-messages"
                infoClass="info-messages"
                errorClass="error-messages"/>

    <!-- Add New Person Button -->
    <div class="button-group">
        <h:link outcome="personInput" value="新規追加" styleClass="button-link add"/>
    </div>

    <!-- Person List Table -->
    <h:form>
        <h:dataTable value="#{personListBean.personList}" 
                     var="person" 
                     styleClass="person-table">
            
            <!-- ID Column -->
            <h:column>
                <f:facet name="header">ID</f:facet>
                #{person.personId}
            </h:column>
            
            <!-- Name Column -->
            <h:column>
                <f:facet name="header">名前</f:facet>
                #{person.personName}
            </h:column>
            
            <!-- Age Column -->
            <h:column>
                <f:facet name="header">年齢</f:facet>
                #{person.age}
            </h:column>
            
            <!-- Gender Column -->
            <h:column>
                <f:facet name="header">性別</f:facet>
                <h:outputText value="男性" rendered="#{person.gender == 'male'}"/>
                <h:outputText value="女性" rendered="#{person.gender == 'female'}"/>
            </h:column>
            
            <!-- Action Column -->
            <h:column>
                <f:facet name="header">操作</f:facet>
                
                <!-- Edit Button -->
                <h:link outcome="personInput" value="編集" styleClass="button-link">
                    <f:param name="personId" value="#{person.personId}"/>
                </h:link>
                
                <!-- Delete Button -->
                <h:commandButton value="削除" 
                                 action="#{personListBean.deletePerson(person.personId)}"
                                 onclick="return confirm('削除してもよろしいですか？');"
                                 styleClass="button-link delete">
                    <f:ajax execute="@form" render="@all"/>
                </h:commandButton>
            </h:column>
        </h:dataTable>
    </h:form>
</h:body>
</html>
