# Jakarta EE API ã‚µãƒ¼ãƒ“ã‚¹é–‹ç™º Agent Skill

## ğŸ¯ ã“ã‚Œã¯ä½•ï¼Ÿ

Jakarta EE 10ã¨JAX-RS 3.1ã‚’ä½¿ã£ãŸREST API ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨èˆ¬ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®æ±ç”¨Agent Skillã§ã™ã€‚

ã“ã®Agent Skillsã«å«ã¾ã‚Œã‚‹ã‚‚ã®:
* instructions/: 6æ®µéšã®é–‹ç™ºã‚¤ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆåŸºæœ¬è¨­è¨ˆã€ã‚¿ã‚¹ã‚¯åˆ†è§£ã€è©³ç´°è¨­è¨ˆã€ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã€å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œè©•ä¾¡ã€E2Eãƒ†ã‚¹ãƒˆç”Ÿæˆï¼‰
* principles/: Jakarta EEé–‹ç™ºã®åŸå‰‡ï¼ˆå…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§éµå®ˆã™ã¹ãå…±é€šãƒ«ãƒ¼ãƒ«ã€å“è³ªåŸºæº–ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¨™æº–ï¼‰

å¯¾å¿œã™ã‚‹å®Ÿè£…è¦ä»¶:

* ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®Ÿè£…ï¼ˆJPA/EntityManagerï¼‰
* å¤–éƒ¨APIé€£æºï¼ˆRestClientï¼‰
* JWTèªè¨¼ãƒ»èªå¯
* CORSå¯¾å¿œ
* ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†

---

## ğŸš€ è¶…ç°¡å˜ãªä½¿ã„æ–¹ï¼ˆ6æ®µéšãƒ—ãƒ­ã‚»ã‚¹ï¼‰

### ã‚¹ãƒ†ãƒƒãƒ—1: ğŸ“„ åŸºæœ¬è¨­è¨ˆï¼ˆSPECä½œæˆï¼‰

```
@agent_skills/jakarta-ee-api-base/instructions/basic_design.md

SPECã‚’ä½œæˆã—ã¦ãã ã•ã„

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* spec_directory: <SPECãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹>
```

AIã¨å¯¾è©±ã—ãªãŒã‚‰:
1. ğŸ“‹ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ basic_design/ ãƒ•ã‚©ãƒ«ãƒ€ã«å±•é–‹
2. ğŸ“– requirements.mdã‚’èª­ã¿è¾¼ã¿ã€ç†è§£å†…å®¹ã‚’èª¬æ˜
3. ğŸ’¬ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨å¯¾è©±ã—ãªãŒã‚‰å„SPECã®ä¸­èº«ã‚’åŸ‹ã‚ã‚‹
4. ğŸ“ ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®SPECï¼ˆarchitecture_design.mdã€functional_design.mdç­‰ï¼‰ã‚’ basic_design/ ã«ä½œæˆ

æ³¨æ„:
* requirements.mdï¼ˆè¦ä»¶å®šç¾©æ›¸ï¼‰ã¯æ‰€ä¸ã¨ã™ã‚‹ï¼ˆæ—¢ã«å­˜åœ¨ã—ã¦ã„ã‚‹å‰æï¼‰
* åŸºæœ¬è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã‚’ä¸€æšå²©ã¨ã—ã¦è¨­è¨ˆã™ã‚‹
* æ©Ÿèƒ½å˜ä½ã¸ã®åˆ†è§£ã¯ã€æ¬¡ã®ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ•ã‚§ãƒ¼ã‚ºã§å®Ÿæ–½ã™ã‚‹

### ã‚¹ãƒ†ãƒƒãƒ—2: ğŸ“‹ ã‚¿ã‚¹ã‚¯åˆ†è§£

```
@agent_skills/jakarta-ee-api-base/instructions/task_breakdown.md

ã‚¿ã‚¹ã‚¯ã‚’åˆ†è§£ã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* spec_directory: <SPECãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹>
* output_directory: <ã‚¿ã‚¹ã‚¯å‡ºåŠ›å…ˆãƒ‘ã‚¹ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰>
```

ã“ã‚Œã ã‘ï¼ AIãŒè‡ªå‹•ã§ï¼š
1. ğŸ“– basic_design/ ã‚’åˆ†æ
2. ğŸ¯ æ©Ÿèƒ½ã‚’ä¾å­˜é–¢ä¿‚ã«åŸºã¥ã„ã¦è­˜åˆ¥ã—ã€å®Ÿè£…é †åºã‚’æ±ºå®š
3. ğŸ”§ ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†è§£ãƒ»ç”Ÿæˆã™ã‚‹
4. ğŸ’¾ `tasks/`ãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜ã™ã‚‹

é‡è¦: ã“ã®ã‚¿ã‚¹ã‚¯åˆ†è§£ã®çµæœãŒã€æ¬¡ã®è©³ç´°è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚ºã§ detailed_design/ ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã‚’æ±ºå®šã—ã¾ã™

### ã‚¹ãƒ†ãƒƒãƒ—3: ğŸ¨ è©³ç´°è¨­è¨ˆ

```
@agent_skills/jakarta-ee-api-base/instructions/detailed_design.md

è©³ç´°è¨­è¨ˆæ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* spec_directory: <SPECãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹>
* target_type: FUNC_XXX_xxx
```

AIã¨å¯¾è©±ã—ãªãŒã‚‰ï¼š
1. ğŸ“‚ ã‚¿ã‚¹ã‚¯åˆ†è§£ã®çµæœã«åŸºã¥ã„ã¦ detailed_design/{target_type}/ ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
2. ğŸ“– basic_design/functional_design.md ã‚’å‚ç…§ã—ã¦å®Ÿè£…è¨­è¨ˆã‚’ä½œæˆ
3. ğŸ¨ å®Ÿè£…ãƒ¬ãƒ™ãƒ«ã® detailed_design.md ã‚’ç”Ÿæˆï¼ˆã‚¯ãƒ©ã‚¹è¨­è¨ˆã€ãƒ¡ã‚½ãƒƒãƒ‰ã‚·ã‚°ãƒãƒãƒ£ã€ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
4. âœ… å˜ä½“ãƒ†ã‚¹ãƒˆç”¨ã® behaviors.md ã‚’æ–°è¦ä½œæˆï¼ˆã‚¿ã‚¹ã‚¯ç²’åº¦å†…ã®ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªï¼‰
5. â“ ä¸æ˜ç‚¹ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è³ªå•
6. ğŸ’¬ å¯¾è©±ã§å¦¥å½“æ€§ãƒ»å……è¶³æ€§ã‚’ç¢ºèª

é‡è¦ï¼š
* functional_design.md ã¯ basic_design/ ã«ã®ã¿å­˜åœ¨ï¼ˆå”¯ä¸€ã®çœŸå®Ÿã®æƒ…å ±æºï¼‰
* requirements/behaviors.md: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®æŒ¯ã‚‹èˆã„ï¼ˆE2Eãƒ†ã‚¹ãƒˆç”¨ï¼‰
* basic_design/behaviors.md: Serviceå±¤ä»¥ä¸‹ã®æŒ¯ã‚‹èˆã„ï¼ˆçµåˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
* detailed_design/{target}/behaviors.md: ã‚¿ã‚¹ã‚¯ç²’åº¦å†…ã®æŒ¯ã‚‹èˆã„ï¼ˆå˜ä½“ãƒ†ã‚¹ãƒˆç”¨ï¼‰

ãªãœå¿…è¦ï¼Ÿ
* SPECã®ç†è§£ã‚’äººãŒç¢ºèªã§ãã‚‹
* ä¸è¶³æƒ…å ±ã‚’è£œå®Œã§ãã‚‹
* ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã®ç²¾åº¦ãŒå‘ä¸Šã™ã‚‹

### ã‚¹ãƒ†ãƒƒãƒ—4: âš™ï¸ ã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼ˆè©³ç´°è¨­è¨ˆâ†’å®Ÿè£…â†’å˜ä½“ãƒ†ã‚¹ãƒˆï¼‰

```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md

ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* task_file: <ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹>
* skip_infrastructure: true  # ã‚¤ãƒ³ãƒ•ãƒ©ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```

AIãŒï¼š
1. ğŸ“„ ã‚¿ã‚¹ã‚¯ã¨è©³ç´°è¨­è¨ˆï¼ˆdetailed_design/é…ä¸‹ï¼‰ã‚’èª­ã¿è¾¼ã‚€
2. ğŸ’» ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ï¼ˆResourceã€Serviceã€Daoã€Entityã€DTOç­‰ï¼‰
3. âœ… ã‚¿ã‚¹ã‚¯ç²’åº¦å†…ã®å˜ä½“ãƒ†ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹
   * åŒã˜ã‚¿ã‚¹ã‚¯å†…ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã¯å®Ÿéš›ã®é€£æºã‚’ãƒ†ã‚¹ãƒˆ
   * ã‚¿ã‚¹ã‚¯å¤–ã®ä¾å­˜é–¢ä¿‚ã®ã¿ãƒ¢ãƒƒã‚¯åŒ–
   * ä¾‹: BookService â†’ BookDao ã¯å®Ÿéš›ã®é€£æºã€EntityManagerã¯ãƒ¢ãƒƒã‚¯
4. â˜‘ï¸ ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã¨ã—ã¦ãƒãƒ¼ã‚¯ã™ã‚‹

ğŸ’¡ skip_infrastructureãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* `true`: DB/APã‚µãƒ¼ãƒãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼ˆæ—¢å­˜ç’°å¢ƒã‚’ä½¿ç”¨ï¼‰
* `false`ã¾ãŸã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—: å®Œå…¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œ

### ã‚¹ãƒ†ãƒƒãƒ—5: ğŸ” å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œè©•ä¾¡

```
@agent_skills/jakarta-ee-api-base/instructions/unit_test_execution.md

å˜ä½“ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* target_type: FUNC_XXX_xxx
```

AIãŒï¼š
1. ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆgradle test jacocoTestReportï¼‰
2. ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœã¨ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’åˆ†æ
3. ğŸ” å•é¡Œã‚’åˆ†é¡:
   * ãƒ†ã‚¹ãƒˆå¤±æ•—ï¼ˆã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã€ä¾‹å¤–ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‰
   * å¿…è¦ãªæŒ¯ã‚‹èˆã„ï¼ˆãƒ†ã‚¹ãƒˆãŒä¸è¶³ï¼‰
   * ãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰ï¼ˆåˆ°é”ä¸å¯èƒ½ãƒ»å†—é•·ï¼‰
   * è¨­è¨ˆã®èª¤ã‚Šï¼ˆä»•æ§˜ã¨ã®ä¸ä¸€è‡´ï¼‰
4. ğŸ“‹ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
5. ğŸ’¬ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æç¤º

é‡è¦ï¼š
* å•é¡Œã‚’ç™ºè¦‹ã—ã¦ã‚‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèªãªã—ã«ä¿®æ­£ã—ãªã„
* ã‚«ãƒãƒ¬ãƒƒã‚¸ä¸è¶³ã‚„ãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰ã‚’å…·ä½“çš„ã«ææ¡ˆ
* å¿…è¦ã«å¿œã˜ã¦ã‚¹ãƒ†ãƒƒãƒ—3ï¼ˆè©³ç´°è¨­è¨ˆï¼‰ã«æˆ»ã£ã¦ãƒ«ãƒ¼ãƒ—

ğŸ”„ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ«ãƒ¼ãƒ—:
```
è©³ç´°è¨­è¨ˆ â†’ ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ â†’ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œè©•ä¾¡
    â†‘                         â†“
    â””â”€â”€â”€â”€ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ â†â”€â”€â”€â”€â”˜
```

å“è³ªç›®æ¨™ã‚’é”æˆã™ã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™

### ã‚¹ãƒ†ãƒƒãƒ—6: ğŸ”— çµåˆãƒ†ã‚¹ãƒˆç”Ÿæˆ

```
@agent_skills/jakarta-ee-api-base/instructions/it_generation.md

çµåˆãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* spec_directory: <SPECãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹>
```

AIãŒï¼š
1. ğŸ“„ basic_design/behaviors.mdï¼ˆçµåˆãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªï¼‰ã‚’èª­ã¿è¾¼ã‚€
2. ğŸ§ª JUnit 5 + Weld SE ã‚’ä½¿ç”¨ã—ãŸçµåˆãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆã™ã‚‹
   * Serviceå±¤ä»¥ä¸‹ï¼ˆService + DAO + Entity + DBï¼‰ã®é€£æºãƒ†ã‚¹ãƒˆ
   * å®Ÿéš›ã®DBã‚¢ã‚¯ã‚»ã‚¹ï¼ˆãƒ¡ãƒ¢ãƒªDBï¼‰
   * å¤–éƒ¨APIã¯WireMockã§ã‚¹ã‚¿ãƒ–åŒ–
   * ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ä¸è¦
3. ğŸ·ï¸ `@Tag("integration")` ã§çµåˆãƒ†ã‚¹ãƒˆã‚’åˆ†é›¢

å®Ÿè¡Œæ–¹æ³•:
```bash
# çµåˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
./gradlew integrationTest
```

### ã‚¹ãƒ†ãƒƒãƒ—7: ğŸ§ª E2Eãƒ†ã‚¹ãƒˆç”Ÿæˆ

```
@agent_skills/jakarta-ee-api-base/instructions/e2e_test_generation.md

E2Eãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* spec_directory: <SPECãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹>
```

AIãŒï¼š
1. ğŸ“„ requirements/behaviors.mdï¼ˆE2Eãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªï¼‰ã‚’èª­ã¿è¾¼ã‚€
2. ğŸ§ª REST Assured ã‚’ä½¿ç”¨ã—ãŸE2Eãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆã™ã‚‹
   * è¤‡æ•°æ©Ÿèƒ½é–“ã®é€£æºã‚’ãƒ†ã‚¹ãƒˆ
   * å®Ÿéš›ã®HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹
   * å®Ÿéš›ã®DBã‚¢ã‚¯ã‚»ã‚¹ã‚’å«ã‚€
   * E2Eã®ãƒ•ãƒ­ãƒ¼æ¤œè¨¼
3. ğŸ“‹ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—/ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆ
4. ğŸ·ï¸ `@Tag("e2e")` ã§E2Eãƒ†ã‚¹ãƒˆã‚’åˆ†é›¢

é‡è¦ï¼š
* E2Eãƒ†ã‚¹ãƒˆã¯å®Ÿè£…å®Œäº†å¾Œã«å®Ÿè¡Œ
* ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹çŠ¶æ…‹ã§å®Ÿè¡Œ
* `./gradlew e2eTest` ã§å®Ÿè¡Œï¼ˆé€šå¸¸ã® `test` ã‚¿ã‚¹ã‚¯ã‹ã‚‰ã¯é™¤å¤–ï¼‰

---

## ğŸ”„ åŸºæœ¬è¨­è¨ˆå¤‰æ›´å¯¾å¿œï¼ˆæ‰‹æˆ»ã‚Šãƒ»æ‹¡å¼µæ¡ˆä»¶ï¼‰

### ã„ã¤ä½¿ã†ï¼Ÿ

* çµåˆãƒ†ã‚¹ãƒˆã‚„E2Eãƒ†ã‚¹ãƒˆã§ä¸å…·åˆãŒè¦‹ã¤ã‹ã‚Šã€åŸºæœ¬è¨­è¨ˆã«æˆ»ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆï¼ˆbaselineæ‰‹æˆ»ã‚Šï¼‰
* æ‹¡å¼µæ¡ˆä»¶ï¼ˆenhancementsï¼‰ã§æ–°æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã€åŸºæœ¬è¨­è¨ˆã‚’æ›´æ–°ã™ã‚‹å ´åˆ
* æ—¢å­˜æ©Ÿèƒ½ã®ä»•æ§˜å¤‰æ›´ãŒç™ºç”Ÿã—ãŸå ´åˆ

### å®Ÿè¡Œæ–¹æ³•

```
@agent_skills/jakarta-ee-api-base/instructions/basic_design_change.md

åŸºæœ¬è¨­è¨ˆã®å¤‰æ›´ã‚’æ¤œå‡ºã—ã¦ã€å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* spec_directory: <SPECãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹>
```

AIãŒï¼š
1. ğŸ“„ CHANGES.mdï¼ˆå¤‰æ›´å·®åˆ†ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã‚’èª­ã¿è¾¼ã¿
2. ğŸ” å¤‰æ›´ã®å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè©³ç´°è¨­è¨ˆã€ã‚³ãƒ¼ãƒ‰ã€ãƒ†ã‚¹ãƒˆï¼‰ã‚’ç‰¹å®š
3. ğŸ“‹ å¤‰æ›´ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`tasks/change_tasks.md`ï¼‰ã‚’ç”Ÿæˆ
4. ğŸ¯ æ—¢å­˜ã®æŒ‡ç¤ºæ›¸ã‚’å‘¼ã³å‡ºã—ã¦ã€å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°
5. âœ… ã™ã¹ã¦ã®å¤‰æ›´é©ç”¨å¾Œã€CHANGES.mdã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

### å‡¦ç†ãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[åŸºæœ¬è¨­è¨ˆå¤‰æ›´] --> B{CHANGES.mdå­˜åœ¨?}
    B -->|ãªã—| C[ã‚¨ãƒ©ãƒ¼: CHANGES.mdã‚’ä½œæˆ]
    B -->|ã‚ã‚Š| D[CHANGES.mdèª­ã¿è¾¼ã¿]
    D --> E[å½±éŸ¿åˆ†æ]
    E --> F[å¤‰æ›´ã‚¿ã‚¹ã‚¯ç”Ÿæˆ]
    F --> G[è©³ç´°è¨­è¨ˆæ›´æ–°]
    G --> H[ã‚³ãƒ¼ãƒ‰æ›´æ–°]
    H --> I[ãƒ†ã‚¹ãƒˆæ›´æ–°]
    I --> J[CHANGES.mdã‚¢ãƒ¼ã‚«ã‚¤ãƒ–]
```

### å¤‰æ›´å·®åˆ†ç®¡ç†

```
specs/baseline/basic_design/
  â”œâ”€â”€ functional_design.md (or .xlsx)
  â”œâ”€â”€ CHANGES.md              # ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªå¤‰æ›´
  â””â”€â”€ changes_archive/        # é©ç”¨æ¸ˆã¿å¤‰æ›´
      â”œâ”€â”€ 20260118_order_cancel.md
      â””â”€â”€ 20260125_order_history.md
```

é‡è¦:
* ãƒã‚¹ã‚¿ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆfunctional_design.mdç­‰ï¼‰ã¯è‡ªç”±ã«æ›´æ–°
* å¤‰æ›´å†…å®¹ã¯CHANGES.mdã«æ˜ç¤ºçš„ã«è¨˜è¼‰
* Markdownã€EXCELã€PDFç­‰ã€å½¢å¼éä¾å­˜

---

## ğŸ“œ é–‹ç™ºåŸå‰‡

ã“ã®Agent Skillsã«ã¯ã€Jakarta EEé–‹ç™ºã§éµå®ˆã™ã¹ãåŸå‰‡ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

* å ´æ‰€: `@agent_skills/jakarta-ee-api-base/principles/`
  * [architecture.md](principles/architecture.md) - Jakarta EE APIã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¨™æº–
  * [security.md](principles/security.md) - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¨™æº–
  * [common_rules.md](principles/common_rules.md) - å…±é€šãƒ«ãƒ¼ãƒ«

* ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¨™æº–ã®ä¸»ãªå†…å®¹:
  * æ¨™æº–æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆJakarta EE 10ã€JPA 3.1ã€JAX-RS 3.1ç­‰ï¼‰
  * ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆAPIã€Securityã€Serviceã€DAOã€Entityï¼‰
  * é–‹ç™ºæ¨™æº–ï¼ˆå‘½åè¦å‰‡ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ­ã‚°å‡ºåŠ›ï¼‰
  * ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å®Ÿè£…ï¼ˆJWTèªè¨¼ã€èªè¨¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€èªè¨¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰
  * ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ã¨ä¸¦è¡Œåˆ¶å¾¡ï¼ˆæ¥½è¦³çš„ãƒ­ãƒƒã‚¯ï¼‰
  * ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹æˆã€REST APIè¨­è¨ˆåŸå‰‡ã€ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
  * ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¨™æº–ã®ä¸»ãªå†…å®¹:
  * JWTèªè¨¼ï¼ˆHttpOnly Cookieã€ãƒˆãƒ¼ã‚¯ãƒ³ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã€CSRFå¯¾ç­–ï¼‰
  * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†ï¼ˆBCryptãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰
  * ãƒ‡ãƒ¼ã‚¿ä¿è­·ï¼ˆå€‹äººæƒ…å ±ã€æ©Ÿå¯†æƒ…å ±ã€æš—å·åŒ–ï¼‰
  * é€šä¿¡ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆHTTPS/TLSã€è¨¼æ˜æ›¸ç®¡ç†ï¼‰
  * ã‚»ã‚­ãƒ¥ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆSQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã€XSSã€ã‚³ãƒãƒ³ãƒ‰ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ï¼‰
  * OWASP Top 10å¯¾å¿œ

* å…±é€šãƒ«ãƒ¼ãƒ«ã®ä¸»ãªå†…å®¹:
  1. ä»•æ§˜ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆé–‹ç™º: ã™ã¹ã¦ã®æ©Ÿèƒ½é–‹ç™ºã¯è©³ç´°ãªSPECã®ä½œæˆã‹ã‚‰å§‹ã‚ã‚‹
  2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ä¸€è²«æ€§: Jakarta EE 10ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«å¾“ã†
  3. ãƒ†ã‚¹ãƒˆé§†å‹•å“è³ª: ã™ã¹ã¦ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã«å¯¾ã—ã¦å˜ä½“ãƒ†ã‚¹ãƒˆã‚’ä½œæˆ
  4. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå“è³ªã®è¿½æ±‚: ã‚³ãƒ¼ãƒ‰ã¨SPECãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å¸¸ã«æœ€æ–°ã«ä¿ã¤
  5. Markdownãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¦ç´„: ç®‡æ¡æ›¸ãã¯ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯ã€ãƒœãƒ¼ãƒ«ãƒ‰ä¸ä½¿ç”¨ç­‰

* æ³¨æ„:
  * ã“ã‚Œã‚‰ã®åŸå‰‡ã¯å…¨Jakarta EEãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å…±é€š
  * ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®ãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹å ´åˆã¯ã€ãã‚Œã‚‚ä½µã›ã¦éµå®ˆã—ã¦ãã ã•ã„

---

## ğŸ’¡ å®Ÿè·µä¾‹

### ä¾‹1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç«‹ã¡ä¸Šã’ï¼ˆREST APIã‚µãƒ¼ãƒ“ã‚¹ - 4æ®µéšï¼‰

ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬è¨­è¨ˆï¼ˆSPECä½œæˆï¼‰
```
@agent_skills/jakarta-ee-api-base/instructions/basic_design.md

SPECã‚’ä½œæˆã—ã¦ãã ã•ã„

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: projects/sdd/bookstore/back-office-api-sdd
* spec_directory: projects/sdd/bookstore/back-office-api-sdd/specs/baseline
```

AIã¨å¯¾è©±ã—ãªãŒã‚‰SPECã‚’ä½œæˆ

ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¿ã‚¹ã‚¯åˆ†è§£
```
@agent_skills/jakarta-ee-api-base/instructions/task_breakdown.md

å…¨ã‚¿ã‚¹ã‚¯ã‚’åˆ†è§£ã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: projects/sdd/bookstore/back-office-api-sdd
* spec_directory: projects/sdd/bookstore/back-office-api-sdd/specs/baseline
```

çµæœ:
```
tasks/
â”œâ”€â”€ tasks.md              â† ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆï¼ˆä¾å­˜é–¢ä¿‚ã€å®Ÿè¡Œé †åºã‚’è¨˜è¼‰ï¼‰
â”œâ”€â”€ setup.md              â† ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆç‰¹åˆ¥ãªã‚¿ã‚¹ã‚¯ã€å¸¸ã«æœ€åˆï¼‰
â”œâ”€â”€ FUNC_001_xxx.md       â† æ©Ÿèƒ½åˆ¥ã‚¿ã‚¹ã‚¯ï¼ˆå†…å®¹ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ï¼‰
â”œâ”€â”€ FUNC_002_yyy.md       â† æ©Ÿèƒ½åˆ¥ã‚¿ã‚¹ã‚¯ï¼ˆå†…å®¹ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ï¼‰
â””â”€â”€ FUNC_003_zzz.md
```

ã‚¹ãƒ†ãƒƒãƒ—3: è©³ç´°è¨­è¨ˆï¼ˆæ›¸ç±APIï¼‰
```
@agent_skills/jakarta-ee-api-base/instructions/detailed_design.md

æ›¸ç±APIã®è©³ç´°è¨­è¨ˆæ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: projects/sdd/bookstore/back-office-api-sdd
* spec_directory: projects/sdd/bookstore/back-office-api-sdd/specs/baseline
* target_type: FUNC_002_books

JPQLæ¤œç´¢ã¨Criteria APIæ¤œç´¢ã®ä¸¡æ–¹ã‚’å®Ÿè£…ã™ã‚‹äºˆå®šã§ã™ã€‚
```

AIã¨ã®å¯¾è©±:
```
AI: ã‚¿ã‚¹ã‚¯åˆ†è§£ã®çµæœã‚’ç¢ºèªã—ã¾ã—ãŸã€‚
    detailed_design/FUNC_002_books/ ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ã¾ã™ã€‚
    basic_design/functional_design.md ã‚’å‚ç…§ã—ã¦æ›¸ç±APIã®å®Ÿè£…è¨­è¨ˆã‚’ä½œæˆã—ã¾ã™ã€‚
    
    ã€APIæ¦‚è¦ã€‘ï¼ˆbasic_design/functional_design.mdã‹ã‚‰ï¼‰
    * æ›¸ç±APIï¼ˆ/api/booksï¼‰
    * ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:
      1. GET /api/books - å…¨æ›¸ç±å–å¾—
      2. GET /api/books/{id} - æ›¸ç±è©³ç´°
      3. GET /api/books/search/jpql - JPQLæ¤œç´¢
      4. GET /api/books/search/criteria - Criteria APIæ¤œç´¢
    
    ã€é–¢é€£ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã€‘
    * Bookï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«: BOOK + STOCKï¼‰
      * @ManyToOne Category
      * @ManyToOne Publisher
      * @SecondaryTable(name="STOCK") for quantity, version
    
    ã€ä¸æ˜ç‚¹ãƒ»ç¢ºèªäº‹é …ã€‘
    1. æ¤œç´¢æ¡ä»¶ã¯keywordã¨categoryIdã§ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ
    2. keywordã¯bookNameã¨authorã®ä¸¡æ–¹ã‚’å¯¾è±¡ã«ã—ã¾ã™ã‹ï¼Ÿ

ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã¯ã„ã€ãã®é€šã‚Šã§ã™ã€‚keywordã¯ä¸¡æ–¹ã‚’å¯¾è±¡ã«ã—ã¦ãã ã•ã„ã€‚

AI: æ‰¿çŸ¥ã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã‚’ä½œæˆã—ã¾ã—ãŸï¼š
    â†’ specs/baseline/detailed_design/FUNC_002_books/detailed_design.mdï¼ˆå®Ÿè£…ã‚¯ãƒ©ã‚¹è¨­è¨ˆï¼‰
    â†’ specs/baseline/detailed_design/FUNC_002_books/behaviors.mdï¼ˆå˜ä½“ãƒ†ã‚¹ãƒˆç”¨ï¼‰
```

ã‚¹ãƒ†ãƒƒãƒ—4: ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md

æ›¸ç±APIã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: projects/sdd/bookstore/back-office-api-sdd
* task_file: projects/sdd/bookstore/back-office-api-sdd/tasks/FUNC_002_books.md
```

### ä¾‹2: å¤–éƒ¨APIé€£æºï¼ˆ4æ®µéšï¼‰

ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬è¨­è¨ˆï¼ˆã‚¹ã‚­ãƒƒãƒ— - æ—¢ã«SPECãŒå­˜åœ¨ã™ã‚‹å ´åˆï¼‰

ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¿ã‚¹ã‚¯åˆ†è§£
```
@agent_skills/jakarta-ee-api-base/instructions/task_breakdown.md

å…¨ã‚¿ã‚¹ã‚¯ã‚’åˆ†è§£ã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: projects/sdd/bookstore/berry-books-api-sdd
* spec_directory: projects/sdd/bookstore/berry-books-api-sdd/specs/baseline
```

ã‚¹ãƒ†ãƒƒãƒ—3: è©³ç´°è¨­è¨ˆï¼ˆæ³¨æ–‡API - ç‹¬è‡ªå®Ÿè£… + å¤–éƒ¨APIé€£æºï¼‰
```
@agent_skills/jakarta-ee-api-base/instructions/detailed_design.md
@projects/sdd/bookstore/berry-books-api-sdd/specs

å¯¾è±¡: FUNC_003_orders

æ³¨æ–‡APIã®è©³ç´°è¨­è¨ˆæ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
ç‹¬è‡ªå®Ÿè£… + å¤–éƒ¨APIé€£æºã‚’å®Ÿè£…ã—ã¾ã™ã€‚
```

AIã¨ã®å¯¾è©±:
```
AI: ç†è§£ã—ãŸå†…å®¹ã‚’èª¬æ˜ã—ã¾ã™...
    ã€APIæ¦‚è¦ã€‘
    * æ³¨æ–‡APIï¼ˆ/api/ordersï¼‰
    * REST APIã‚µãƒ¼ãƒ“ã‚¹ï¼ˆç‹¬è‡ªå®Ÿè£… + å¤–éƒ¨APIé€£æºï¼‰
    
    ã€å®Ÿè£…ã™ã‚‹ã‚¯ãƒ©ã‚¹ã€‘
    * OrderResource, OrderService, OrderDao
    * Entity: OrderTran, OrderDetailï¼ˆãƒ­ãƒ¼ã‚«ãƒ«DBï¼‰
    
    ã€å¤–éƒ¨APIé€£æºã€‘
    * BackOfficeRestClient: åœ¨åº«ãƒã‚§ãƒƒã‚¯ã€åœ¨åº«æ›´æ–°
    * æ¥½è¦³çš„ãƒ­ãƒƒã‚¯å¯¾å¿œ
    
    ã€ä¸æ˜ç‚¹ãƒ»ç¢ºèªäº‹é …ã€‘
    1. åœ¨åº«æ›´æ–°å¤±æ•—æ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥ã¯ï¼Ÿ
    2. é…é€æ–™é‡‘ã®è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã¯SPECã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ

ãƒ¦ãƒ¼ã‚¶ãƒ¼: åœ¨åº«æ›´æ–°å¤±æ•—æ™‚ã¯OptimisticLockExceptionã‚’ã‚¹ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ã€‚
         é…é€æ–™é‡‘ã¯æ±äº¬éƒ½å†…500å††ã€é–¢æ±åœ700å††ã€ãã®ä»–1000å††ã§ã™ã€‚

AI: æ‰¿çŸ¥ã—ã¾ã—ãŸã€‚DeliveryFeeServiceã‚’è¿½åŠ ã—ã¾ã™ã€‚
    detailed_design.mdã‚’ä½œæˆã—ã¾ã—ãŸã€‚
```

ã‚¹ãƒ†ãƒƒãƒ—4: ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@projects/sdd/bookstore/berry-books-api-sdd/specs/baseline/detailed_design/FUNC_003_orders/detailed_design.md

æ³¨æ–‡APIã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
```

AIãŒè‡ªå‹•å®Ÿè£…ï¼š
* âœ… ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
* âœ… Daoï¼ˆJPQLæ¤œç´¢ + Criteria APIæ¤œç´¢ï¼‰
* âœ… Service
* âœ… Resourceï¼ˆREST APIï¼‰
* âœ… å„ç¨®ãƒ†ã‚¹ãƒˆ

### ä¾‹4: æ¥½è¦³çš„ãƒ­ãƒƒã‚¯å®Ÿè£…

```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@projects/sdd/bookstore/back-office-api-sdd/tasks/FUNC_002_stocks.md

åœ¨åº«APIã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
æ¥½è¦³çš„ãƒ­ãƒƒã‚¯ï¼ˆ@Versionï¼‰ã‚’ä½¿ã£ãŸåœ¨åº«æ›´æ–°ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
```

AIãŒè‡ªå‹•å®Ÿè£…ï¼š
* âœ… ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆ@Versionã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰
* âœ… Dao
* âœ… Serviceï¼ˆæ¥½è¦³çš„ãƒ­ãƒƒã‚¯å‡¦ç†ï¼‰
* âœ… Resourceï¼ˆREST APIï¼‰
* âœ… OptimisticLockExceptionMapperï¼ˆHTTP 409 Conflictï¼‰
* âœ… å„ç¨®ãƒ†ã‚¹ãƒˆï¼ˆç«¶åˆã‚·ãƒŠãƒªã‚ªå«ã‚€ï¼‰

### ä¾‹5: å¤–éƒ¨APIçµ±åˆ + JWTèªè¨¼

```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@projects/sdd/bookstore/berry-books-api-sdd/tasks/FUNC_001_auth.md

èªè¨¼APIã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
```

AIãŒè‡ªå‹•å®Ÿè£…ï¼š
* âœ… JWTèªè¨¼åŸºç›¤ï¼ˆJwtUtilã€JwtAuthenFilterã€AuthenContextï¼‰
* âœ… å¤–éƒ¨APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆRestClientï¼‰
* âœ… Resourceï¼ˆREST APIï¼‰
* âœ… å„ç¨®ãƒ†ã‚¹ãƒˆ

### ä¾‹6: ä¸¦è¡Œä½œæ¥­ï¼ˆãƒãƒ¼ãƒ é–‹ç™ºï¼‰

é–‹ç™ºè€…A:
```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/tasks/FUNC_001_xxx.md

FUNC_001ã‚’å®Ÿè£…
```

é–‹ç™ºè€…Bï¼ˆåŒæ™‚ã«å®Ÿè¡Œï¼‰:
```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/tasks/FUNC_002_yyy.md

FUNC_002ã‚’å®Ÿè£…
```

é–‹ç™ºè€…Cï¼ˆåŒæ™‚ã«å®Ÿè¡Œï¼‰:
```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/tasks/FUNC_003_zzz.md

FUNC_003ã‚’å®Ÿè£…
```

â†’ ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¡çªã—ãªã„ã®ã§ä¸¦è¡Œå®Ÿè¡Œå¯èƒ½ï¼

---

## ğŸ¨ ä¾¿åˆ©ãªä½¿ã„æ–¹

### è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŒæ™‚å‚ç…§

```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/tasks/FUNC_001_xxx.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/specs/baseline/detailed_design/FUNC_001_xxx/detailed_design.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/specs/baseline/detailed_design/FUNC_001_xxx/behaviors.md

FUNC_001ã‚’å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
```

### æ®µéšçš„å®Ÿè£…

```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/tasks/FUNC_001_xxx.md

ã‚¿ã‚¹ã‚¯T_API001_001ã‹ã‚‰T_API001_003ã¾ã§å®Ÿè£…ã—ã¦ãã ã•ã„ã€‚
æ®‹ã‚Šã¯æ¬¡å›ã‚„ã‚Šã¾ã™ã€‚
```

### ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼

```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/tasks/FUNC_001_xxx.md

å…¨ã‚¿ã‚¹ã‚¯å®Œäº†ã—ã¦ã„ã¾ã™ã€‚
SPECã¨ã®æ•´åˆæ€§ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
```

---

## ğŸ”§ å®Ÿè·µçš„ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### Day 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç«‹ã¡ä¸Šã’

```
@agent_skills/jakarta-ee-api-base/instructions/task_breakdown.md

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ã‚¿ã‚¹ã‚¯ã‚’åˆ†è§£ã—ã¦ãã ã•ã„ã€‚
```

â†’ ã‚¿ã‚¹ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ãŒç”Ÿæˆã•ã‚Œã‚‹

### Day 2: ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆå…¨å“¡ï¼‰

ãƒ‘ã‚¿ãƒ¼ãƒ³A: ãƒ•ãƒ«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆåˆå›ã®ã¿ï¼‰
```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/tasks/setup.md

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* task_file: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>/tasks/setup.md
* skip_infrastructure: false
```

ãƒ‘ã‚¿ãƒ¼ãƒ³B: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã®ã¿ï¼ˆé–‹ç™ºç’°å¢ƒæ§‹ç¯‰æ¸ˆã¿ã®å ´åˆï¼‰
```
@agent_skills/jakarta-ee-api-base/instructions/code_generation.md
@<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‘ã‚¹>/tasks/setup.md

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼ˆã‚¤ãƒ³ãƒ•ãƒ©ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>
* task_file: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‘ã‚¹>/tasks/setup.md
* skip_infrastructure: true
```

ğŸ’¡ skip_infrastructureã‚ªãƒ—ã‚·ãƒ§ãƒ³:
* `false`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µãƒ¼ãƒãƒ¼ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒãƒ¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å«ã‚€å®Œå…¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
* `true`: ã‚¤ãƒ³ãƒ•ãƒ©ã¯æ—¢å­˜ç’°å¢ƒã‚’ä½¿ç”¨ã—ã€ã‚¹ã‚­ãƒ¼ãƒä½œæˆãƒ»åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥ãƒ»é™çš„ãƒªã‚½ãƒ¼ã‚¹é…ç½®ã®ã¿å®Ÿè¡Œ

### Day 3-5: APIå®Ÿè£…ï¼ˆä¸¦è¡Œä½œæ¥­ï¼‰

å„æ‹…å½“è€…ãŒç‹¬ç«‹ã—ã¦APIã‚’å®Ÿè£…

### Day 6: çµåˆãƒ†ã‚¹ãƒˆ

```
@agent_skills/jakarta-ee-api-base/instructions/it_generation.md

çµåˆãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆãƒ»å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ>
* spec_directory: <SPECãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª>
```

### Day 7: E2Eãƒ†ã‚¹ãƒˆ

```
@agent_skills/jakarta-ee-api-base/instructions/e2e_test_generation.md

E2Eãƒ†ã‚¹ãƒˆã‚’ç”Ÿæˆãƒ»å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ>
* spec_directory: <SPECãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª>
```

### è¨­è¨ˆå¤‰æ›´ãƒ»æ‰‹æˆ»ã‚Šå¯¾å¿œï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

çµåˆãƒ†ã‚¹ãƒˆã‚„E2Eãƒ†ã‚¹ãƒˆã§ä¸å…·åˆãŒè¦‹ã¤ã‹ã‚Šã€åŸºæœ¬è¨­è¨ˆã®å¤‰æ›´ãŒå¿…è¦ãªå ´åˆï¼š

```
@agent_skills/jakarta-ee-api-base/instructions/basic_design_change.md

åŸºæœ¬è¨­è¨ˆã®å¤‰æ›´ã‚’æ¤œå‡ºã—ã¦ã€å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚

ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:
* project_root: <ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ>
* spec_directory: <SPECãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª>
```

AIãŒå¤‰æ›´ã‚’æ¤œå‡ºã—ã€å½±éŸ¿ã‚’å—ã‘ã‚‹è©³ç´°è¨­è¨ˆãƒ»ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•çš„ã«æ›´æ–°ã—ã¾ã™ã€‚

---

## ğŸ¯ å¯¾å¿œã™ã‚‹ä¸»è¦æ©Ÿèƒ½

### Jakarta EE-based REST API

Jakarta EE 10ã¨JAX-RS 3.1ã‚’ä½¿ã£ãŸREST APIã‚µãƒ¼ãƒ“ã‚¹ã®é–‹ç™ºã‚’æ”¯æ´ã—ã¾ã™ã€‚

### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®Ÿè£…

* JPA/EntityManagerã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
* CRUDæ“ä½œã®å®Ÿè£…
* ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
* ç‹¬ç«‹ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†

### å¤–éƒ¨APIé€£æº

* RestClientã«ã‚ˆã‚‹å¤–éƒ¨APIå‘¼ã³å‡ºã—
* ãƒ—ãƒ­ã‚­ã‚·è»¢é€
* ç‹¬è‡ªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…
* è¤‡æ•°ã®APIã‚’çµ±åˆ

### æ¥½è¦³çš„ãƒ­ãƒƒã‚¯ï¼ˆOptimistic Lockingï¼‰

* `@Version`ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨
* æ›´æ–°æ™‚ã®ç«¶åˆã‚’æ¤œå‡º
* `OptimisticLockException`ã‚’é©åˆ‡ã«å‡¦ç†
* ç«¶åˆæ™‚ã¯HTTP 409 Conflictã‚’è¿”ã™

### 2ç¨®é¡ã®æ¤œç´¢å®Ÿè£…#### JPQLæ¤œç´¢

* JPQLã‚¯ã‚¨ãƒªã§å‹•çš„æ¤œç´¢ã‚’å®Ÿè£…
* ã‚·ãƒ³ãƒ—ãƒ«ã§èª­ã¿ã‚„ã™ã„ã‚³ãƒ¼ãƒ‰

#### Criteria APIæ¤œç´¢

* JPA Criteria APIã§å‹å®‰å…¨ãªæ¤œç´¢ã‚’å®Ÿè£…
* ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®å‹ãƒã‚§ãƒƒã‚¯ãŒåŠ¹ã

ä¸¡æ–¹ã®å®Ÿè£…ã‚’æ¯”è¼ƒå­¦ç¿’ã§ãã‚‹è¨­è¨ˆï¼

### REST APIçµ±åˆ

* å¤–éƒ¨APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆJAX-RS Clientï¼‰
* APIé–“é€£æº
* ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€ãƒªãƒˆãƒ©ã‚¤å‡¦ç†
* ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### JWTèªè¨¼

* JWTç”Ÿæˆãƒ»æ¤œè¨¼
* èªè¨¼ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
* èªè¨¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
* æ¨©é™ãƒã‚§ãƒƒã‚¯

### CORSå¯¾å¿œ

* ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¨±å¯
* ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š
* ãƒ—ãƒªãƒ•ãƒ©ã‚¤ãƒˆãƒªã‚¯ã‚¨ã‚¹ãƒˆå¯¾å¿œ

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
agent_skills/jakarta-ee-api-base/
â”œâ”€â”€ SKILL.md                          # Agent Skillèª¬æ˜æ›¸
â”œâ”€â”€ README.md                         # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ principles/                       # é–‹ç™ºåŸå‰‡ï¼ˆå…¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…±é€šï¼‰
â”‚   â”œâ”€â”€ architecture.md              # Jakarta EE APIã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¨™æº–
â”‚   â”œâ”€â”€ security.md                  # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¨™æº–
â”‚   â””â”€â”€ common_rules.md              # å…±é€šãƒ«ãƒ¼ãƒ«
â”œâ”€â”€ templates/                        # SPECãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ basic_design/                # åŸºæœ¬è¨­è¨ˆç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â”‚   â”œâ”€â”€ architecture_design.md
â”‚   â”‚   â”œâ”€â”€ functional_design.md
â”‚   â”‚   â”œâ”€â”€ data_model.md
â”‚   â”‚   â”œâ”€â”€ behaviors.md            # E2Eãƒ†ã‚¹ãƒˆç”¨
â”‚   â”‚   â””â”€â”€ external_interface.md
â”‚   â””â”€â”€ detailed_design/             # è©³ç´°è¨­è¨ˆç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚       â”œâ”€â”€ detailed_design.md
â”‚       â””â”€â”€ behaviors.md            # å˜ä½“ãƒ†ã‚¹ãƒˆç”¨
â””â”€â”€ instructions/
    â”œâ”€â”€ basic_design.md               # ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬è¨­è¨ˆï¼ˆSPECä½œæˆï¼‰
    â”œâ”€â”€ task_breakdown.md             # ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¿ã‚¹ã‚¯åˆ†è§£
    â”œâ”€â”€ detailed_design.md            # ã‚¹ãƒ†ãƒƒãƒ—3: è©³ç´°è¨­è¨ˆ
    â””â”€â”€ code_generation.md            # ã‚¹ãƒ†ãƒƒãƒ—4: ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
```

---

## ğŸ”‘ é‡è¦ãªå®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ

### 1. æ¥½è¦³çš„ãƒ­ãƒƒã‚¯

```java
@Entity
public class Stock {
    @Version
    private int version;  // æ¥½è¦³çš„ãƒ­ãƒƒã‚¯ç”¨
    // ...
}
```

### 2. 2ç¨®é¡ã®æ¤œç´¢å®Ÿè£…

* JPQL:
```java
@ApplicationScoped
public class BookDao {
    public List<Book> searchBooks(String keyword, Integer categoryId) {
        // JPQLå‹•çš„ã‚¯ã‚¨ãƒª
    }
}
```

* Criteria API:
```java
@ApplicationScoped
public class BookDaoCriteria {
    public List<Book> searchBooks(String keyword, Integer categoryId) {
        // Criteria APIå‹å®‰å…¨ã‚¯ã‚¨ãƒª
    }
}
```

### 3. CORSè¨­å®š

```java
@Provider
public class CorsFilter implements ContainerResponseFilter {
    // CORSãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®š
}
```

### 4. å¤–éƒ¨APIé€£æº

```java
@ApplicationScoped
public class BackOfficeRestClient {
    private Client client;
    
    @ConfigProperty(name = "back-office-api.base-url")
    private String baseUrl;
    
    public BookTO getBook(Integer bookId) {
        // REST APIå‘¼ã³å‡ºã—
    }
}
```

### 5. JWTèªè¨¼

```java
@Provider
@Priority(Priorities.AUTHENTICATION)
public class JwtAuthenFilter implements ContainerRequestFilter {
    // JWTæ¤œè¨¼ã¨ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¨­å®š
}
```
